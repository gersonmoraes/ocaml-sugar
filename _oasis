OASISFormat: 0.4
Name:        sugar
Version:     0.4.0
Synopsis:    A library to bring sugar syntatic to your error handling layer.
Authors:     Gerson Moraes <gerson@digirati.com.br>
License:     MIT

Plugins:       META (0.4), DevFiles (0.4)
BuildTools:    ocamlbuild
AlphaFeatures: ocamlbuild_more_args

# Flags
# ---------------------------------------------------------------------

Flag all
  Description:   Build everything possible
  Default:       false

Flag "lwt"
  Description:   Build the Lwt library
  Default$:      flag(all)

Flag "async"
  Description:   Build the Async library
  Default$:      flag(all)

Flag "example"
  Description:   Build the examples
  Default$:      flag(all)

# Libraries
# ---------------------------------------------------------------------

Library "sugar_lwt"
  Build$:           flag(lwt)
  Install$:         flag(lwt)
  FindlibName:      lwt
  FindlibParent:    sugar
  Path:             lib/lwt
  CompiledObject:   byte
  Modules:          Sugar_lwt
  BuildDepends:     threads, lwt, sugar
  XMETADescription: A library to bring sugar syntatic to your error handling layer.

Library "sugar_async"
  Build$:           flag(async)
  Install$:         flag(async)
  FindlibName:      async
  FindlibParent:    sugar
  Path:             lib/async
  Modules:          Sugar_async
  CompiledObject:   byte
  BuildDepends:     threads, async, sugar
  XMETADescription: A library to bring sugar syntatic to your error handling layer.

Library "sugar"
  FindlibName:      sugar
  Path:             lib/sugar
  Modules:          Sugar_promise, Sugar_types, Sugar_option, Sugar_result, Sugar,
                    Sugar_generic, Sugar_free
  BuildDepends:     ppx_sexp_conv, sexplib

  CompiledObject:   byte
  XMETADescription: A library to bring sugar syntatic to your error handling layer.


# Examples
# ---------------------------------------------------------------------

Executable "example_basic"
  Build$:         flag(example)
  Install:        false
  Path:           examples
  MainIs:         example_basic.ml
  CompiledObject: byte
  BuildDepends:   sugar

Executable "free_basic"
  Build$:         flag(example)
  Install:        false
  Path:           examples/free
  MainIs:         free_basic.ml
  CompiledObject: byte
  BuildDepends:   sugar

Executable "free_error_aware"
  Build$:         flag(example)
  Install:        false
  Path:           examples/free
  MainIs:         free_error_aware.ml
  CompiledObject: byte
  BuildDepends:   sugar

Executable "free_error_aware_combined"
  Build$:         flag(example)
  Install:        false
  Path:           examples/free
  MainIs:         free_error_aware_combined.ml
  CompiledObject: byte
  BuildDepends:   sugar, ppx_sexp_conv, sexplib

Executable "example_async"
  Build$:         flag(example) && flag(async)
  Install:        false
  Path:           examples
  MainIs:         example_async.ml
  CompiledObject: byte
  BuildDepends:   async, async_unix, sugar, sugar.async

Executable "example_semicolon"
  Build$:         flag(example) && flag(lwt)
  Install:        false
  Path:           examples
  MainIs:         example_semicolon.ml
  CompiledObject: byte
  BuildDepends:   lwt, lwt.unix, sugar, sugar.lwt



# Docs
# ---------------------------------------------------------------------
Document "sugar"
  Type: ocamlbuild (0.4)
  BuildTools: ocamldoc
  Title: Sugar reference
  Abstract: Sugar is a small monadic library to simplify error handling layers.
  XOCamlbuildPath: .
  XOCamlbuildExtraArgs:
    "-docflags '-colorize-code -short-functors -charset utf-8'"
  XOCamlbuildLibraries: sugar
