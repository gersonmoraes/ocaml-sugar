<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sugar__Strict_promise_builder (sugar.Sugar__Strict_promise_builder)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">sugar</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Sugar__Strict_promise_builder</span></h1></header><p>This module is similar to <a href="../Sugar__Promise_builder/index.html">Sugar.Promise</a>.
It lets you create a result monad on top of an arbitrary monad.</p><p>The main difference is that the functions in this module were created to
recognize unexpected exceptions, and require you to provide some mecanism to
recover from that. This is done with the signatures for <a href="../Sugar/S/Params/module-type-Strict_error/index.html">strict error</a> and <a href="../Sugar/S/Params/module-type-Strict_monad/index.html">strict monad</a>.</p><p>An example:
</p><pre><code class="code">
  module MyError = struct
    type t = A | B | Unexpected of exn

    let panic e = Unexpected e
  end

  module MyMonad = struct
    type 'a t = 'a Lwt.t
    let return = Lwt.return
    let (&gt;&gt;=) = Lwt.(&gt;&gt;=)
    let catch = Lwt.catch
  end

  module MyResult = Sugar.Strict.Promise.Make (MyError) (MyMonad)
  </code></pre><p>Notice that the signature for the required strict monad is the same as the Lwt
library. That means, you can just plug it in:
</p><pre><code class="code">
    module MyResult = Sugar.Strict.Promise.Make (MyError) (Lwt)
  </code></pre><div class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-UserError/index.html">UserError</a> : <a href="../Sugar/S/Params/index.html#module-type-Strict_error">Sugar.S.Params.Strict_error</a>) -&gt; <span class="keyword">functor</span> (<a href="Make/argument-2-UserMonad/index.html">UserMonad</a> : <a href="../Sugar/S/Params/index.html#module-type-Strict_monad">Sugar.S.Params.Strict_monad</a>) -&gt; <a href="../Sugar/S/index.html#module-type-Strict_promise">Sugar.S.Strict_promise</a><span class="keyword"> with </span><span class="keyword">type </span><a href="Make/index.html#type-error">error</a> := <a href="Make/argument-1-UserError/index.html#type-t">UserError.t</a><span class="keyword"> and </span><span class="keyword">type </span>a <a href="Make/index.html#type-monad">monad</a> := a <a href="Make/argument-2-UserMonad/index.html#type-t">UserMonad.t</a><span class="keyword"> and </span><span class="keyword">type </span>'a <a href="Make/index.html#type-value">value</a><span class="keyword"> = </span>(<span class="type-var">'a</span>, <a href="Make/argument-1-UserError/index.html#type-t">UserError.t</a>) Result.result<span class="keyword"> and </span><span class="keyword">type </span>'a <a href="Make/index.html#type-result">result</a><span class="keyword"> = </span>(<span class="type-var">'a</span>, <a href="Make/argument-1-UserError/index.html#type-t">UserError.t</a>) Result.result <a href="Make/argument-2-UserMonad/index.html#type-t">UserMonad.t</a></code></div><div class="doc"><p>A parametric module that implements the monadic interface for values.
The complete documentation can be found in <a href="../Sugar/S/module-type-Promise/index.html">Sugar.S.Promise</a>.</p></div></div></body></html>